
    <h1> Video Recording using MediaStreamRecorder </h1>
    <div>
        <label for="video-width">Video Width:</label>
        <input type="text" id="video-width" value="320">
        <label for="video-height">Video Height:</label>
        <input type="text" id="video-height" value="240">
        <button id="start-recording"  class="btn btn-success" >Start Recording</button>
        <button id="stop-recording" class="btn btn-danger" disabled>Stop Recording</button>
        <button id="snapshot" class="btn btn-primary" disabled>Snapshot</button>
    </div>
        <div id="videos-container"></div>


<%= simple_form_for([@project, @video]) do |f| %>

  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name %>
    <%= f.input :description %>
    <%# f.association :project %>
    <%# f.input :file %>
    <%= f.input :meters %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %>




<script type="text/javascript">

//Global variables
var timeInterval = 7200 * 1000;
var videosContainer = document.getElementById('videos-container');
var index = 1;
//buttons controller
document.querySelector('#snapshot').onclick = function() {
    var v = document.getElementsByTagName('video');
    var c =capture(v[0]);
    var dataURI = c.toDataURL('image/jpeg'); // can also use 'image/png'
    var img = document.createElement('img');
    img.src = dataURI;
    videosContainer.appendChild(img);
}

document.querySelector('#start-recording').onclick = function() {
    this.disabled = true;
    navigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);
};

document.querySelector('#stop-recording').onclick = function() {
    this.disabled = true;
    mediaRecorder.stop();

    document.querySelector('#start-recording').disabled = false;
    document.querySelector('#snapshot').disabled = true;
    //delete video element
    var v = document.getElementsByTagName('video');
    v = document.querySelector('#video-player');
    videosContainer.removeChild(v);
    //deleted    
};


</script>